# Arduino와 p5.js를 활용한 신호등 프로젝트 

## **프로젝트 개요**
이 프로젝트는 **Arduino**와 **p5.js**를 활용하여 신호등 시스템을 시뮬레이션한 프로젝트입니다. **Web Serial API**를 통해 하드웨어(Arduino)와 소프트웨어(p5.js) 간의 실시간 데이터를 주고받으며, 신호등의 동작 및 사용자 인터페이스(UI)를 구현하였습니다.

### **프로젝트 목표**
1. 하드웨어와 소프트웨어의 통합을 통해 효율적이고 직관적인 신호등 시스템 설계
2. 사용자에게 친숙한 웹 UI와 하드웨어 제어 간의 실시간 연동
3. LED 상태 시각화, 신호 주기 조정, 음악 재생 등 다양한 기능 제공

---
## **전체 구성**

### 1. **하드웨어 구성 (Arduino 기반)**
![alt text](./figure/circuit.png)
- **LED** : 빨간색, 노란색, 초록색 LED로 구성된 신호등
- **버튼** : 모드 변경 및 동작 제어
- **가변 저항** : LED 밝기 조절
- **Arduino Uno** : LED와 버튼, 가변 저항의 동작을 관리하며 시리얼 통신 수행
- **전원 및 접지 핀** : Arduino 보드로부터 전원을 공급받고, 브레드보드와 연결

### 2. **소프트웨어 구성 (p5.js 기반 UI)**
- **슬라이더** : 신호등의 주기(빨간불, 노란불, 초록불)를 조정
- **볼륨 조절** : 음악 재생 볼륨 조정
- **신호등 UI** : LED 상태를 시각화하며, 모드에 따라 LED가 켜짐/꺼짐 상태를 실시간 반영
- **Web Serial API** : Arduino와 데이터를 송수신하며 LED 상태, 밝기, 모드를 실시간으로 동기화

---

## **Arduino와 p5.js 간 통신 구조**


#### Arduino → p5.js
- **Arduino가 전송하는 데이터**
  - **LED 상태**: RED, YELLOW, GREEN으로 각각의 LED 켜짐 여부를 표시
  - **밝기**: 가변 저항을 통한 LED 밝기 값
  - **모드 정보**: 현재 모드를 전송
  - **신호 주기**: 빨간불, 노란불, 초록불 주기

- **p5.js에서 수행하는 작업**
  - 전송된 데이터를 분석하여 UI에서 LED 상태를 반영
  - 모드에 따른 음악 재생
  - 밝기와 신호 주기를 슬라이더와 동기화하여 시각적으로 표시

---

#### p5.js → Arduino
- **p5.js가 전송하는 데이터**
  - 사용자 입력값(슬라이더를 통한 주기 조정, 음악 볼륨 조정)

- **Arduino에서 수행하는 작업**
  - 수신된 주기 데이터를 바탕으로 LED의 점등 주기 변경
  - 수신된 볼륨 데이터를 바탕으로 음악 볼륨 조정정

---

## 코드 주요 메커니즘
1. **TaskScheduler 라이브러리**
   - 여러 작업(Task)을 정의하고 동시에 실행 가능
   - 각 신호등의 동작과 깜빡임을 독립적으로 관리
2. **PinChangeInterrupt 라이브러리**
   - 버튼 입력 처리에 사용되며, 디바운스 처리가 포함되어 있습니다
3. **시리얼 통신**
   - 현재 LED 상태 및 밝기 정보를 출력하여 모니터링 가능
   - 외부 명령을 통해 빨간불, 노란불, 초록불 시간 설정 변경

---

## **주요 기능 요약**
1. **신호 주기 조정**
   - 사용자 입력(슬라이더)을 통해 빨간불, 노란불, 초록불의 점등 시간을 설정 가능
2. **LED 밝기 조절**
   - 가변 저항을 통해 LED 밝기 실시간 변경
3. **모드 변경**
   - 버튼 클릭 또는 p5.js에서의 입력으로 LED 상태 및 동작 모드 변경
4. **음악 재생**
   - 각 모드에 맞는 음악 재생과 볼륨 설정

---

## **동작 영상** 
https://youtu.be/fWByR672ELc